<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
	<package name="manage-default" extends="default">
		<interceptors>
			<interceptor name="singleLoginInterceptor" class="com.iotekclass.operation.web.interceptor.SingleLoginInterceptor"></interceptor>
			<interceptor name="userPermissionInterceptor" class="com.iotekclass.operation.web.interceptor.UserPermissionInterceptor"></interceptor>
			<interceptor name="operationRecordInterceptor" class="com.iotekclass.operation.web.interceptor.OperationRecordInterceptor"></interceptor>
			<!-- <interceptor name="remeberMeInterceptor" class="com.iotek.coding.web.interceptor.RemeberMeInterceptor"></interceptor> -->
			<interceptor-stack name="myManageDefaultInterceptorStack">
				<!-- Shiro remeberMe 处理 -->
				<!-- <interceptor-ref name="remeberMeInterceptor"></interceptor-ref> -->
				<!-- Shiro 单一登录 处理 -->
				<interceptor-ref name="singleLoginInterceptor"></interceptor-ref>
				<interceptor-ref name="userPermissionInterceptor"></interceptor-ref>
				<interceptor-ref name="operationRecordInterceptor"></interceptor-ref>
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>  
                    <param name="exception.logLevel">error</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors> 
		<default-interceptor-ref name="myManageDefaultInterceptorStack"></default-interceptor-ref>
		<!-- 请求页面找不到时处理 -->
		<default-action-ref name="pageNotFund"></default-action-ref> 

		<global-results>
				<result name="error">/error/500</result>
				<result name="logout" type="redirect">/user/logout</result>
				<result name="nopermission" type="redirect">/user/anon</result>
		</global-results>
		
		<global-exception-mappings> 
			<exception-mapping exception="java.lang.Exception" result="error" />
		</global-exception-mappings>
		
		<action name="pageNotFund"> 
		   <result>/error/404</result> 
		</action> 
	</package>
	
	<package name="manage-default-json" extends="json-default">
		<interceptors>
			<interceptor name="singleLoginInterceptor" class="com.iotekclass.operation.web.interceptor.SingleLoginInterceptor"></interceptor>
			<interceptor name="userPermissionInterceptor" class="com.iotekclass.operation.web.interceptor.UserPermissionInterceptor"></interceptor>
			<interceptor name="operationRecordInterceptor" class="com.iotekclass.operation.web.interceptor.OperationRecordInterceptor"></interceptor>
			<interceptor-stack name="myManageDefaultInterceptorStack">
				<!-- Shiro remeberMe 处理 -->
				<!-- <interceptor-ref name="remeberMeInterceptor"></interceptor-ref> -->
				<!-- Shiro 单一登录 处理 -->
				<interceptor-ref name="singleLoginInterceptor"></interceptor-ref> 
				<interceptor-ref name="userPermissionInterceptor"></interceptor-ref> 
				<interceptor-ref name="operationRecordInterceptor"></interceptor-ref>
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>  
                    <param name="exception.logLevel">error</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors> 
		<default-interceptor-ref name="myManageDefaultInterceptorStack"></default-interceptor-ref>
		<!-- 请求页面找不到时处理 -->
		<default-action-ref name="pageNotFund"></default-action-ref> 

		<global-results>
				<result name="error">/web/pages/common/error.jsp</result>
				<result name="logout" type="redirect">/user/logout</result>
				<result name="nopermission" type="redirect">/user/anon</result>
		</global-results>
		
		<global-exception-mappings> 
			<exception-mapping exception="java.lang.Exception" result="error" />
		</global-exception-mappings>
		
		<action name="pageNotFund"> 
		   <result>/error/404</result> 
		</action> 
	</package>
</struts>
